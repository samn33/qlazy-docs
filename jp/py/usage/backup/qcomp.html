

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>量子コンピュータ(QCompクラス, Backendクラスなど) &mdash; qlazy  documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> qlazy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../Install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../Tutorial_en.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../Tutorial_jp.html">Tutorial (japanese)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../python-api/qlazy.html">qlazy package</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">qlazy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>量子コンピュータ(QCompクラス, Backendクラスなど)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/jp/py/usage/backup/qcomp.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="qcomp-backend">
<h1>量子コンピュータ(QCompクラス, Backendクラスなど)<a class="headerlink" href="#qcomp-backend" title="Permalink to this heading">¶</a></h1>
<div class="section" id="id1">
<h2>量子コンピュータ操作の基本<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h2>
<p>量子コンピュータで量子計算を行うというのは、欲しい結果を得るように設計
された量子回路をユニタリゲートと測定の組み合わせという形で用意しておき、
それを量子コンピュータに投入して測定結果を取得するということです。
QCompクラスは、そのような一連の操作を実行できるように量子コンピュータ
そのものを抽象化したクラスです。このクラスを使って、どのように量子計算
を実行するかについて、以下で説明します。</p>
<div class="section" id="id2">
<h3>量子コンピュータの生成・初期化<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<p>量子計算を実行するためには、当たり前ですが、まず量子コンピュータを用意
する必要があります。QCompのインスタンスを生成するときに、どの量子コン
ピュータのバックエンドで計算をさせるかをproduct(製品名)とdevice(デバイ
ス名)の組で指定します。例えば、qlazyというproductのqstate_simulatorと
いうdeviceで計算させたい場合、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qlazy</span> <span class="kn">import</span> <span class="n">QComp</span>
<span class="n">qc</span> <span class="o">=</span> <span class="n">QComp</span><span class="p">(</span><span class="n">product</span><span class="o">=</span><span class="s1">&#39;qlazy&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="s1">&#39;qstate_simulator&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>とします。qlazyのstabilizer_simulatorで計算させたい場合、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qc</span> <span class="o">=</span> <span class="n">QComp</span><span class="p">(</span><span class="n">product</span><span class="o">=</span><span class="s1">&#39;qlazy&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="s1">&#39;stabilizer_simulator&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>とします。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qc</span> <span class="o">=</span> <span class="n">QComp</span><span class="p">()</span>
</pre></div>
</div>
<p>のようにproductとdeviceを指定しない場合、qlazyのqstate_simulatorが指定
されます。その他、現在のバージョンで対応しているバックエンドは、
<a class="reference external" href="https://github.com/qulacs/qulacs">qulacs</a>と<a class="reference external" href="https://quantum-computing.ibm.com/">IBM Quantum(IBMQ)</a>です。
使用法などの詳細は「対応しているバックエンド」(後述)をご参照ください。</p>
</div>
<div class="section" id="id3">
<h3>量子回路の設定と実行<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h3>
<div class="section" id="id4">
<h4>測定<a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h4>
<p>量子コンピュータが用意できたら、次に量子回路を設定します。QStateクラス
やDensopクラスと同じ記法でゲートを追加していきます。例えば、Bell状態を
作成する回路を設定したい場合は、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qc</span> <span class="o">=</span> <span class="n">QComp</span><span class="p">()</span>
<span class="n">qc</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">qc</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>のようにします。hはアダマールゲート、cxはCNOTゲートを表します。または、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qc</span> <span class="o">=</span> <span class="n">QComp</span><span class="p">()</span>
<span class="n">qc</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>のようにゲートをつなげて書いてもOKです。これで量子コンピュータ内部に、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">q0</span> <span class="o">--</span><span class="n">H</span><span class="o">--*---</span>
        <span class="o">|</span>
<span class="n">q1</span> <span class="o">-----</span><span class="n">X</span><span class="o">---</span>
</pre></div>
</div>
<p>という回路が設定されたことになります。ここで、q0,q1は量子レジスタを表
しています。</p>
<p>QStateクラスやDensOpクラスやStabilizerクラスと違い、この段階ではまだゲー
ト演算は実行されていません。以下のようにrunメソッドを適用することでは
じめて実行されます(初期状態は常に|00…0&gt;です。いまの例は2量子ビットな
ので|00&gt;です)。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qc</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>しかし、計算結果は測定をしないと得られないので、これでは意味がありませ
ん。測定を表すゲートmeasureを付加して、以下のようにすれば、測定結果を
取得することができます。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qc</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">cid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">shots</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>回路図で書くと、以下のような操作に相当します。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">q0</span> <span class="o">--</span><span class="n">H</span><span class="o">--*---</span><span class="n">M</span>
        <span class="o">|</span>   <span class="o">|</span>
<span class="n">q1</span> <span class="o">-----</span><span class="n">X</span><span class="o">---|--</span><span class="n">M</span>
            <span class="o">|</span>  <span class="o">|</span>
<span class="n">c0</span> <span class="o">---------*--|--</span>	
<span class="n">c1</span> <span class="o">------------*--</span>
</pre></div>
</div>
<p>ここで、1行目のmeasureメソッドは計算基底で測定するためのゲートで、qid
に測定する量子ビット番号(量子レジスタ番号)を指定し、cidにその結果を格
納する古典レジスタ番号を指定します。ここでqidの長さとcidの長さは一致し
ている必要があります。cidをまったく指定しないということも許されますが、
その場合測定して状態は変化しますが測定値をどこにも格納しないという操作
を意味します。</p>
<p>測定を含んだ量子回路が設定できたらば、2行目に示すようにrunメソッドを呼
び出して実行します。runのオプションとして指定されているshotsは実行回数
(=測定回数)を表しています。これで測定結果がresult変数に格納されること
になります。resultにはcidとfrequencyという２つのプロパティが定義されて
いて、各々、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">cid</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">frequency</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;00&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;11&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
</pre></div>
</div>
<p>のように値を取り出すことができます。測定がない回路、あるいは測定しても
古典レジスタに測定値を格納しない（measureでcidを指定しない）回路の場合、
resultにはNoneが入ります。</p>
<p>runのオプションとして頻度を取得したい古典レジスタ番号cidを指定すること
もできます。例えば、上の回路で、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">shots</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">cid</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<p>とすると、1番目の古典レジスタに入る値の頻度だけ取り出すことができて、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">cid</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">frequency</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;0&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
</pre></div>
</div>
<p>という結果を得ることができます（いわゆる周辺化ですね）。cidを省略した
場合、全古典レジスタにわたり頻度が計算されます。</p>
</div>
<div class="section" id="id5">
<h4>測定結果に応じたゲート演算制御<a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h4>
<p>古典レジスタに格納されている測定結果に応じて、以降のゲート制御をしたい
ことがあります。そのような一例を以下に示します。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qc</span> <span class="o">=</span> <span class="n">QComp</span><span class="p">()</span>
<span class="n">qc</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">cid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ctrl</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">ctrl</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">cid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">shots</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">frequency</span><span class="p">)</span>
</pre></div>
</div>
<p>2行目の量子回路を設定する部分で、まずh(0).cx(0,1)を追加した後に
measure(qid=[0],cid=[0])を追加しています。つまり、0番目の量子ビットの
測定結果を0番目の古典レジスタに格納します。次にx(0, ctrl=0)と続きます。
xはQStateクラスやDensOpクラスと同様パウリXゲートを表しており、最初の引
数は適用する量子ビット番号です。QCompクラスでは、ctrlという引数も指定
することができます。これはこのゲートを適用するか否かをctrlで指定した古
典レジスタ番号に格納されている測定値によって決めるということを表すため
のものです。いまの例の場合、前段のmeasureで0番目の量子ビットの測定結果
を0番目の古典レジスタに格納していたので、その値が0であったか1であった
かによってパウリXゲートが実行されるかどうかが決まります。1だった場合パ
ウリXゲートが実行されます。次のx(1, ctrl=0)も同様の考え方で実行が制御
されるパウリXゲートです。最後に再びmeasureです。今度は0番目と1番目の量
子ビットが測定されます(cidが指定されていないので、古典レジスタに結果は
格納されません)。</p>
<p>3行目でrunによって、この回路が実行されます。shots=10と指定したので実行
回数は10回です。そして、その測定値の頻度がカウントされて、測定量子ビッ
ト番号リストとともにresultに格納されます。ここでご注意いただきたいので
すが、runで測定結果がカウントされるのは、一番最後のmeasureに対してです。
途中のmeasureの結果はカウントされません。</p>
<p>というわけで、この例の結果はどうなるかわかりますでしょうか？答えは、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;00&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
<p>です。最初のh(0).cx(0,1)で|00&gt;+|11&gt;というBell状態になり(規格化定数は省
略)、0番目の量子ビットを測定して結果が0だった場合は、以降何もしないの
で最終状態は|00&gt;となり、1だった場合は全ビットをビット反転するので最終
状態は|11&gt;のビット反転で|00&gt;になります。これを最後に測定するので、100%
の確率で|00&gt;になります。</p>
</div>
<div class="section" id="id6">
<h4>リセット<a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h4>
<p>特定の量子ビットを強制的に|0&gt;にすることができます。例えば、以下のよう
にresetメソッドを使います。qidオプションには|0&gt;にしたい量子ビット番号
を指定します。何も指定しなかった場合、すべての量子ビットが|0&gt;にリセッ
トされます。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qc</span> <span class="o">=</span> <span class="n">QComp</span><span class="p">()</span>
<span class="n">qc</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">cid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">shots</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">frequency</span><span class="p">)</span>
</pre></div>
</div>
<p>この実行結果は、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;00&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;01&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
</pre></div>
</div>
<p>のようになります。</p>
</div>
</div>
<div class="section" id="id7">
<h3>量子コンピュータの解放<a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h3>
<p>生成・初期化した量子コンピュータのメモリ領域は使われなくなったら自動的
に解放されます。が、delで明示的に好きなタイミングで解放することもでき
ます。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">qc</span>
</pre></div>
</div>
<p>基本は以上です。</p>
</div>
<div class="section" id="id8">
<h3>対応している量子ゲート<a class="headerlink" href="#id8" title="Permalink to this heading">¶</a></h3>
<p>以下に利用可能な量子ゲートを示します。指定できる引数はQStateクラスや
DensOpクラスのものと同様で、さらに上で説明したctrlという引数がすべてユ
ニタリゲートで指定できます。</p>
<div class="section" id="id9">
<h4>1量子ビットゲート（ユニタリゲート）<a class="headerlink" href="#id9" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>x,y,z: Pauli X/Y/Z gate</p></li>
<li><p>h: Hadamard gate</p></li>
<li><p>xr,xr_dg: root X and root X dagger gate</p></li>
<li><p>s,s_dg: S and S dagger gate</p></li>
<li><p>t,t_dg: T and T dagger gate</p></li>
<li><p>p: phase shift gate</p></li>
<li><p>rx,ry,rz: RX/RY/RZ (rotation around X/Y/Z-axis) gate</p></li>
<li><p>u1,u2,u3: U1/U2/U3 gate (by IBM)</p></li>
</ul>
</div>
<div class="section" id="id10">
<h4>2量子ビットゲート（ユニタリゲート）<a class="headerlink" href="#id10" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>cx,cy,cz: controlled X/Y/Z gate</p></li>
<li><p>cxr,cxr_dg: controlled XR and XR dagger gate</p></li>
<li><p>ch: controlled Hadamard gate</p></li>
<li><p>cs,cs_dg: controlled S and S dagger gate</p></li>
<li><p>ct,ct_dg: controlled T and T dagger gate</p></li>
<li><p>sw: swap gate</p></li>
<li><p>cp: controlled P gate</p></li>
<li><p>crx,cry,crz: controlled RX/RY/RZ gate</p></li>
<li><p>cu1,cu2,cu3: controlled U1/U2/U3 gate</p></li>
</ul>
</div>
<div class="section" id="id11">
<h4>3量子ビットゲート（ユニタリゲート）<a class="headerlink" href="#id11" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>ccx: toffoli gate (or CCX gate, controlled controlled X gate)</p></li>
<li><p>csw: fredkin gate (or controlled swap gate)</p></li>
</ul>
</div>
<div class="section" id="id12">
<h4>測定ゲート（非ユニタリゲート）<a class="headerlink" href="#id12" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>measure: measurement gate (computational basis)</p></li>
</ul>
</div>
<div class="section" id="id13">
<h4>リセットゲート（非ユニタリゲート）<a class="headerlink" href="#id13" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>reset: reset gate (computational basis)</p></li>
</ul>
</div>
<div class="section" id="id14">
<h4>注意：スタビライザーシミュレータの場合<a class="headerlink" href="#id14" title="Permalink to this heading">¶</a></h4>
<p>‘qlazy_stabilizer_simulator’の場合、実行できるのはクリフォードゲート
(x,y,z,h,s,s_dg,cx,cy,cz)のみです。</p>
</div>
</div>
<div class="section" id="id15">
<h3>パウリ積の演算<a class="headerlink" href="#id15" title="Permalink to this heading">¶</a></h3>
<p>パウリ演算子X,Y,Zのテンソル積を定義して量子コンピュータに設定すること
ができます。パウリ積を扱うために、まず、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qlazy</span> <span class="kn">import</span> <span class="n">QComp</span><span class="p">,</span> <span class="n">PauliProduct</span>
</pre></div>
</div>
<p>のようにPauliProductクラスをimportする必要があります。例えば、3量子ビッ
トの状態に対して、X2 Y0 Z1というパウリ積を演算したい場合、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qs</span> <span class="o">=</span> <span class="n">QComp</span><span class="p">()</span>
<span class="n">pp</span> <span class="o">=</span> <span class="n">PauliProduct</span><span class="p">(</span><span class="n">pauli_str</span><span class="o">=</span><span class="s2">&quot;XYZ&quot;</span><span class="p">,</span> <span class="n">qid</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">qc</span><span class="o">.</span><span class="n">operate</span><span class="p">(</span><span class="n">pp</span><span class="o">=</span><span class="n">pp</span><span class="p">)</span>
</pre></div>
</div>
<p>のようにoperateメソッドのppオプションにPauliProductのインスタンスを指
定します。制御化されたパウリ積はoperateメソッドのctrlオプションに制御
量子ビット番号を指定することで実現できます。以下のようにします。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qc</span> <span class="o">=</span> <span class="n">QComp</span><span class="p">()</span>
<span class="n">pp</span> <span class="o">=</span> <span class="n">PauliProduct</span><span class="p">(</span><span class="n">pauli_str</span><span class="o">=</span><span class="s2">&quot;XYZ&quot;</span><span class="p">,</span> <span class="n">qid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="n">qc</span><span class="o">.</span><span class="n">operate</span><span class="p">(</span><span class="n">pp</span><span class="o">=</span><span class="n">pp</span><span class="p">,</span> <span class="n">ctlr</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>量子ゲートの設定の場合と同様、operateメソッドを実行しただけでは実際の
演算は実行されていません。runメソッド（およびその前にmeasurementメソッ
ドがないと意味ある結果が得られません）を適用することではじめて実行され
ます。</p>
</div>
</div>
<div class="section" id="id16">
<h2>少し高度な技<a class="headerlink" href="#id16" title="Permalink to this heading">¶</a></h2>
<div class="section" id="id17">
<h3>量子回路をクリアしない実行<a class="headerlink" href="#id17" title="Permalink to this heading">¶</a></h3>
<p>上で説明した基本パターンを改めてまとめると、</p>
<ul class="simple">
<li><p>(1) バックエンドの定義</p></li>
<li><p>(2) 量子コンピュータの初期化（バックエンドを指定）</p></li>
<li><p>(3) 量子回路の設定(ユニタリゲートと非ユニタリゲートを次々に追加)</p></li>
<li><p>(4) 量子回路の実行と結果取得
ということになります。</p></li>
</ul>
<p>例えば、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qlazy</span> <span class="kn">import</span> <span class="n">QComp</span><span class="p">,</span> <span class="n">Backend</span>
<span class="n">bk</span> <span class="o">=</span> <span class="n">Backend</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;qlazy&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="s1">&#39;qstate_simulator&#39;</span><span class="p">)</span>
<span class="n">qc</span> <span class="o">=</span> <span class="n">QComp</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="n">bk</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">cid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">shots</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">frequency</span><span class="p">)</span>
</pre></div>
</div>
<p>という具合です。ここで、5行目のrunを実行したら、量子コンピュータ内部の
「量子回路」はクリアされる仕様になっています。なので、再びrunしても何
も起きません。しかし、同じ量子回路を保持したまま繰り返し何度も計算実行
したい場合やすでに設定済の量子回路にさらにゲートを追加して計算実行した
い場合があるかもしれません。そういった場合、runのオプションclear_qcirc
にFalseを指定することで量子回路をクリアしないようにできます。</p>
<p>上の例で、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">cid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">shots</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">frequency</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">cid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">shots</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">frequency</span><span class="p">)</span>
</pre></div>
</div>
<p>を繰り返しても、結果は、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;1&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
<span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;1&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
<p>となり同じですが、以下のようにclear_qcircをFalseにすると、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">cid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">shots</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">clear_qcirc</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">frequency</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">cid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">shots</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">frequency</span><span class="p">)</span>
</pre></div>
</div>
<p>結果は、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;1&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
<span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;0&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
<p>となります。2番めのrunではビット反転を2回やった結果に対して測定するの
で元の初期状態に戻るというわけです。</p>
</div>
<div class="section" id="id18">
<h3>レジスタの設定<a class="headerlink" href="#id18" title="Permalink to this heading">¶</a></h3>
<p>大規模な量子回路を相手に量子プログラミングしたい場合、レジスタ関連ツー
ルを使うと便利です。</p>
<p>まず、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qlazy.tools.Register</span> <span class="kn">import</span> <span class="n">CreateRegister</span><span class="p">,</span><span class="n">InitRegister</span>
</pre></div>
</div>
<p>という具合に、CreateRegister関数とInitRegister関数をインポートします。
典型的な使い方は以下の通りです。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dat</span> <span class="o">=</span> <span class="n">CreateRegister</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">anc</span> <span class="o">=</span> <span class="n">CreateRegister</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">qubit_num</span> <span class="o">=</span> <span class="n">InitRegister</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">anc</span><span class="p">)</span>
<span class="n">qc</span> <span class="o">=</span> <span class="n">QComp</span><span class="p">(</span><span class="n">qubit_num</span><span class="o">=</span><span class="n">qubit_num</span><span class="p">)</span>
</pre></div>
</div>
<p>これは、3つのデータ量子ビットと2つの補助量子ビットを用意する例です。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">dat</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">anc</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">qubit_num</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">5</span>
</pre></div>
</div>
<p>という具合にdatやancに量子ビット番号が順番に重ならないようにリストとし
て設定され、InitRegister関数の結果、合計のビット数がリターンされます。
レジスタを1次元配列としてではなく、多次元配列にして管理したい場合もあ
るかと思います。その場合は、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qid</span> <span class="o">=</span> <span class="n">CreateRegister</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">qubit_num</span> <span class="o">=</span> <span class="n">InitRegister</span><span class="p">(</span><span class="n">qid</span><span class="p">)</span>
</pre></div>
</div>
<p>とすると、3X3の2次元配列として、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">qid</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],[</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">]]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">qubit_num</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">9</span>
</pre></div>
</div>
<p>のようにレジスタがセットされます。3次元以上の配列も同じように、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qid</span> <span class="o">=</span> <span class="n">CreateRegister</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">qubit_num</span> <span class="o">=</span> <span class="n">InitRegister</span><span class="p">(</span><span class="n">qid</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">qid</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">],[</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">]],[[</span><span class="mi">12</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span><span class="mi">15</span><span class="p">],[</span><span class="mi">16</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">19</span><span class="p">],[</span><span class="mi">20</span><span class="p">,</span><span class="mi">21</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">23</span><span class="p">]]]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">qubit_num</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">24</span>
</pre></div>
</div>
<p>とできます。量子レジスタと古典レジスタの両方をセットする場合は、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># 量子レジスタ</span>
<span class="n">qid</span> <span class="o">=</span> <span class="n">CreateRegister</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">qubit_num</span> <span class="o">=</span> <span class="n">InitRegister</span><span class="p">(</span><span class="n">qid</span><span class="p">)</span>

<span class="c1"># 古典レジスタ</span>
<span class="n">cid</span> <span class="o">=</span> <span class="n">CreateRegister</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">cmem_num</span> <span class="o">=</span> <span class="n">InitRegister</span><span class="p">(</span><span class="n">cid</span><span class="p">)</span>

<span class="c1"># 量子コンピュータの初期化</span>
<span class="n">bk</span> <span class="o">=</span> <span class="n">Backend</span><span class="p">(</span><span class="s1">&#39;qlazy_stabilizer_simulator&#39;</span><span class="p">)</span>
<span class="n">qc</span> <span class="o">=</span> <span class="n">QComp</span><span class="p">(</span><span class="n">qubit_num</span><span class="o">=</span><span class="n">qubit_num</span><span class="p">,</span> <span class="n">cmem_num</span><span class="o">=</span><span class="n">cmem_num</span><span class="p">)</span>

<span class="c1"># 量子回路の設定と実行</span>
<span class="n">qc</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="n">qid</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="n">qid</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">qid</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="n">qid</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">cid</span><span class="o">=</span><span class="n">cid</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="o">...</span>
<span class="n">qc</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">shots</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
<p>とします。量子レジスタと古典レジスタの番号は別々に割り振りたいので、各々
でCreateRegisterとInitRegisterを実行します。</p>
</div>
<div class="section" id="id19">
<h3>カスタムゲートの追加<a class="headerlink" href="#id19" title="Permalink to this heading">¶</a></h3>
<p>QCompクラスを継承することで、自分専用の量子ゲートを簡単に作成・追加す
ることができます。ベル状態を作成する回路をbellメソッドとして、QCompを
継承したMyQCompクラスに追加する例を示します。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyQComp</span><span class="p">(</span><span class="n">QComp</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">bell</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">q0</span><span class="p">,</span> <span class="n">q1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="n">q0</span><span class="p">)</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="n">q0</span><span class="p">,</span><span class="n">q1</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

<span class="n">qc</span> <span class="o">=</span> <span class="n">MyQComp</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;qlazy&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="s1">&#39;qstate_simulator&#39;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">bell</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">cid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">shots</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
<p>これは非常に簡単な例なのであまりご利益を感じないかもしれませんが、大き
な量子回路を繰り返し使いたい場合など、便利に使える場面は多いと思います。</p>
</div>
</div>
<div class="section" id="id20">
<h2>対応しているバックエンド<a class="headerlink" href="#id20" title="Permalink to this heading">¶</a></h2>
<p>現在のバージョンで対応しているバックエンドは<a class="reference external" href="https://github.com/qulacs/qulacs">qulacs</a>と
<a class="reference external" href="https://quantum-computing.ibm.com/">IBM Quantum</a>です。
各々の使い方について、以下で説明します。</p>
<div class="section" id="qulacs">
<h3>qulacs<a class="headerlink" href="#qulacs" title="Permalink to this heading">¶</a></h3>
<p><a class="reference external" href="https://github.com/qulacs/qulacs">qulacs</a>は、<a class="reference external" href="https://qunasys.com/">株式会社
QunaSys</a>が提供しているオープンソースの量子回路シ
ミュレータで、GPUを利用して高速計算が実行できるという特徴があります。</p>
<p><a class="reference external" href="https://quantum-computing.ibm.com/">qlazy</a>の簡単なインターフェースで
GPUを利用した高速計算を実行したい場合、このバックエンドがおすすめです。</p>
<div class="section" id="id21">
<h4>準備<a class="headerlink" href="#id21" title="Permalink to this heading">¶</a></h4>
<p>まず、<a class="reference external" href="http://docs.qulacs.org/ja/latest/intro/1_install.html">Installation - Qulacs ドキュメント</a>
あたりを参照しながらインストールしてください。</p>
</div>
</div>
<div class="section" id="id22">
<h3>使用法<a class="headerlink" href="#id22" title="Permalink to this heading">¶</a></h3>
<p>GPUを利用しないシミュレータで計算させたい場合、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bk</span> <span class="o">=</span> <span class="n">Backend</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;qulacs&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="s1">&#39;cpu_simulator&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>GPUを利用したシミュレータで計算させたい場合、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bk</span> <span class="o">=</span> <span class="n">Backend</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;qulacs&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="s1">&#39;gpu_simulator&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>のように指定します(deviceを省略した場合のデフォルト値は’cpu_simulator’です)。</p>
<p>あとは上述したように、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qc</span> <span class="o">=</span> <span class="n">QComp</span><span class="p">(</span><span class="n">qubit_num</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">cmem_num</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">bk</span><span class="p">)</span>
<span class="n">qc</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">cid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">shots</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p>のようにすれば、qulacsを使った計算ができます。</p>
</div>
<div class="section" id="ibm-quantum">
<h3>IBM Quantum<a class="headerlink" href="#ibm-quantum" title="Permalink to this heading">¶</a></h3>
<p><a class="reference external" href="https://quantum-computing.ibm.com/">IBM Quantum(IBMQ)</a>は、
<a class="reference external" href="https://www.ibm.com/jp-ja">IBM</a>が開発した量子コンピュータ（およびシミュ
レータ）を利用するためのクラウドサービスです。</p>
<p><a class="reference external" href="https://quantum-computing.ibm.com/">qlazy</a>の簡単なインターフェースで
本物の量子コンピュータを利用した計算を実行したい場合、このバックエンドが
おすすめです。</p>
<div class="section" id="id23">
<h4>準備<a class="headerlink" href="#id23" title="Permalink to this heading">¶</a></h4>
<p>IBMQやローカルシミュレータをPythonから利用するためのライブラリである
<a class="reference external" href="https://qiskit.org/">qiskit</a>をインストールして、量子計算を実行できる
環境を整えてください。例えば、<a class="reference external" href="https://dojo.qulacs.org/ja/latest/">Quantum Native
Dojo!</a>の<a class="reference external" href="https://dojo.qulacs.org/ja/latest/notebooks/3.2_Qiskit_IBMQ.html">3-2. QiskitとIBM Q
Experienceの使い
方</a>
に一連の手続きからサンプルコードまで含めて日本語でやさしく書かれていま
すので、これを参考にやってみるのが早いと思います。ただし、IBMQへのリン
クが古いみたいです。正しくは
<a class="reference external" href="https://quantum-computing.ibm.com/">https://quantum-computing.ibm.com/</a>
です。</p>
</div>
<div class="section" id="id24">
<h4>使用法<a class="headerlink" href="#id24" title="Permalink to this heading">¶</a></h4>
<p>本物の量子コンピュータを利用しないでローカルなシミュレータで計算させたい場合、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bk</span> <span class="o">=</span> <span class="n">Backend</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;ibmq&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="s1">&#39;qasm_simulator&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>のように指定します。本物の量子コンピュータを利用したい場合は、例えば、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bk</span> <span class="o">=</span> <span class="n">Backend</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;ibmq&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="s1">&#39;least_busy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>のように指定します。’least_busy’というのは、自分のアカウントで利用可能
な量子コンピュータシステムの中で、現在最も空いているシステムを自動選択して実行する
ためのものです。実行するシステムを明示的に指定することもできます。
例えば、’ibmq_athens’で実行したい場合、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bk</span> <span class="o">=</span> <span class="n">Backend</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;ibmq&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="s1">&#39;ibmq_athens&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>のように指定します(deviceを省略した場合のデフォルト値は’qasm_simulator’です)。</p>
<p>あとは上述したように、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qc</span> <span class="o">=</span> <span class="n">QComp</span><span class="p">(</span><span class="n">qubit_num</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">cmem_num</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">bk</span><span class="p">)</span>
<span class="n">qc</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">cid</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">qc</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">shots</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p>のようにすれば、IBMQを使った計算ができます。</p>
<p>本物の量子コンピュータを使った計算に関して一点注意事項があります。量子
回路を設定してrunする際に、clear_qubits=Falseは指定できません。一度run
して結果が返ってきたら、IBMQ側の量子状態は有無を言わさず解放されるので
(少なくとも現在のIBMQでは…)、qlazy側でそれを保持しておく手段がないからです。</p>
<p>以上</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021-2022, Sam.N.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>